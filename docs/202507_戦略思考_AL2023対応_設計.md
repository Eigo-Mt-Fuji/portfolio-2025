# 戦略思考 x OSアップデート設計

## やりたいこと

昨年学んだ、暗記する戦略思考をイメージしながら
Amazon Linux 2023対応の設計を行う

今回は、リアリティ・スイッチ x フチドリ思考で思考環境が整えてから、設計方針と変更点をアウトプットする
spreadsheetは内部資料なのでそれ以外をここに控えておく

## 詳細

- Amazon Linux 2023対応の設計は以下のことを考慮して設計を行いました
    - OSのメジャーバージョンアップが行われているので、大規模な変更や互換性のない破壊的な変更も含まれる可能性があります。
    - 新しいOSのシステム要件（最低スペック、サポート対象インスタンスタイプなど）を満たしているか、調整が必要ないかも確認が必要です。
        - スペックが要件を満たしても、OSに搭載されているカーネルバージョンの違いで、同じスペックでも使用可能リソースサイズが異なることもあります
    - ECS最適化済みマシンイメージを使用する場合、実行時に使われるDocker Engineを含むツールのバージョンも同時に更新されます(動作時のパフォーマンス影響、エラーを含む、互換性の問題に注意が必要です)
    - 変更トピックには、サーバ内の操作や維持管理（運用）に関わる変更も含まれます。パッケージマネージャの変更や、機能の廃止・削除、SSHサーバのデフォルト設定変更やcloud-initのセキュリティ更新の自動適用の無効化などです。
    - AMIバージョンアップがうまくいくかではなく、アップデート後の運用、ひいては今後の様々なEOL対応に備えることを考えて設計する

- 設計をまとめると以下のようになります
    - 設計段階では、spreadsheetの影響確認表の○がついているコンポーネントが修正対象としています。
        - 最低限修正が必要な変更トピックは、パッケージマネージャの変更とcgroupのバージョン変更(cgroupv2対応)です。
        - cgroupv2対応は、具体的にはdatadog agentのバージョンアップが必要となります。
    - システム要件が変わったことでスペックの見直しをあえて行う必要はないと考えられます（要件は満たしています）ただし、カーネルバージョンが更新されているので、新たなOSに合わせて、対象コンポーネントの環境ごとのタスクサイズ等、リソース閾値の見直しが発生する場合があります。
    - 互換性問題を避けるため、ビルド時に使用するDocker Engineバージョンを実行時バージョンに合わせることが望ましいです
    - OS変更による運用への影響はあまりないかもしれませんが、一度、変更点は確認いただきたいです
      - セキュリティアップデートに関するこれまでの運用の前提が変わったり、
      - サーバ内の操作や維持管理（運用）に関わる変更が、緊急時の対応など実際の業務に影響する可能性が多少あります

## 備考: 暗記戦略思考のパターン

- リアリティ・スイッチ x フチドリ思考(思考環境が整う)
    - スイッチ01 大学1年生の英語留学っぽく考えてみると
    - スイッチ09 定員割れ大学問題っぽく考えてみると
- 調べるか、解くか、それとも顧客に質問するか
    - STEP1. 調べる vs 解く 
      - スイッチ07 フランススーパーっぽく考えてみる
- 一度、引いて考えてみる
    - STEP7. 課題が揃った時、一度、引いて考えてみる
        - スイッチ06 打倒セブンっぽく考えてみると(「本当に競合は誰か？」を考える。特に、目の前の敵は競合か？を疑う思考パス)
        - スイッチ12 年間パスポートっぽく考えてみると( そのまんま思考. 「最も難しく」考える。広告を打つ・単価を上げるといった飛び道具に頼るなどもっての外で「そのまんま」を前提とする思考パス )
- 「条件分岐」を考える。特に「戦略の方向性」が変わる条件を見極める思考パス
    - あらゆる手段で調べたがまだわからない現実が存在する時
        - スイッチ11 すごい素材っぽく考えてみると ( 「条件分岐」を考える。特に「戦略の方向性」が変わる条件を見極める思考パス )
- 現状把握。誰かに聞かないと議論しないとわからないことを見極める
    - 問題を解くための登場人物を把握する。
        - スイッチ04 コインランドリー参入問題っぽく考えてみると
        - スイッチ05 スギ花粉っぽく考えてみると
- 課題を発見する時の１つの指針。深く考える切り口。
    - スイッチ02 カインズっぽく考えてみると ( 誰が敵なのか 特に、消費者／ユーザーがお金を使うまでの「分岐」を詳らかにする思考パス )
    - スイッチ03 車の教習所っぽく考えてみると(どこがホームでどこがアウェイかを考える。 地理的／視覚的に「勝ちゲーム」か「負けゲーム」かを詳（つまび）らかにしていく思考パス )
    - スイッチ08 QBハウスっぽく考えてみると( ターゲットとの「距離」を考える。 「どの層がターゲットになりやすいか？」の序列をつける思考パス)
